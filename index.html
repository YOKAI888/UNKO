<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç©¶æ¥µè–åŸŸãƒ»æ¿€ãƒ¬ã‚¢é»„é‡‘ğŸ’©ç¥ç¥­ã€å®Œå…¨å¾©æ´»ç‰ˆã€‘</title>
    <style>
        :root {
            --pop-size: 10rem;
            --giant-size: 50rem;
            --heart-size: 100px;
            --sparkle-dist: 1200px;
        }

        @media (max-width: 768px) {
            :root {
                --pop-size: 6rem;
                --giant-size: 18rem;
                --heart-size: 90px; /* ã•ã‚‰ã«æŠ¼ã—ã‚„ã™ã */
                --sparkle-dist: 450px;
            }
        }

        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: #fffafb;
            /* touch-actionã‚’ manipulation ã«æˆ»ã—ã¦ã€Œåå¿œã€ã‚’å„ªå…ˆ */
            touch-action: manipulation; 
            font-family: sans-serif;
            -webkit-user-select: none;
            user-select: none;
        }
        
        #bg-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; z-index: 1; opacity: 0.5; pointer-events: none; }
        .panel { flex: 1; height: 100%; transition: background-color 1.5s ease; }
        #moya-layer {
            position: fixed; top: -50%; left: -50%; width: 200%; height: 200%; z-index: 5;
            background: radial-gradient(circle, rgba(255,182,193,0.3) 0%, rgba(182,208,255,0.3) 30%, rgba(182,255,208,0.3) 60%, rgba(255,255,255,0) 100%);
            filter: blur(80px); animation: moyaRotate 44s infinite linear; pointer-events: none;
        }
        @keyframes moyaRotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        #heart-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; }
        
        .heart-wrapper {
            position: absolute; width: var(--heart-size); height: var(--heart-size);
            display: flex; justify-content: center; align-items: center;
            animation: fuyofuyo 11s infinite alternate ease-in-out;
            cursor: pointer;
            /* é€éè‰²ã‚’æ•·ã„ã¦å½“ãŸã‚Šåˆ¤å®šã‚’ç›¤çŸ³ã« */
            background: rgba(0,0,0,0); 
            z-index: 20;
        }

        .aura {
            position: absolute; width: 85%; height: 85%; border-radius: 50%;
            background: conic-gradient(from 0deg, #ffb7b7, #fffbb7, #b7ffb7, #b7ffff, #b7d8ff, #e2b7ff, #ffb7b7);
            filter: blur(15px); opacity: 0.7; animation: auraSpin 3s infinite linear; z-index: -1;
            pointer-events: none;
        }
        @keyframes auraSpin { 0%{transform:rotate(0deg) scale(1);} 50%{transform:rotate(180deg) scale(1.2);} 100%{transform:rotate(360deg) scale(1);} }

        .heart { font-size: calc(var(--heart-size) * 0.5); user-select: none; filter: drop-shadow(0 0 5px white); pointer-events: none; }
        @keyframes fuyofuyo { 0% { transform: translate(0, 0) rotate(-10deg); } 100% { transform: translate(30px, -50px) rotate(10deg); } }

        .pop-common { position: absolute; pointer-events: none; z-index: 100; transform: translate(-50%, -50%); }
        .pop { font-size: var(--pop-size); animation: bowafua 0.7s forwards; }
        .pop-giant { font-size: var(--giant-size); animation: giantBowafua 1.2s forwards; }

        @keyframes bowafua { 0%{transform:translate(-50%,-50%) scale(0); opacity:0;} 45%{transform:translate(-50%,-50%) scale(1.5); opacity:1;} 100%{transform:translate(-50%,-50%) scale(1.2); opacity:0;} }
        @keyframes giantBowafua { 0%{transform:translate(-50%,-50%) scale(0); opacity:0;} 50%{transform:translate(-50%,-50%) scale(1.4); opacity:1; filter: drop-shadow(0 0 50px gold);} 100%{transform:translate(-50%,-50%) scale(1.1); opacity:0;} }

        .sparkle { position: absolute; font-size: 2.5rem; pointer-events: none; z-index: 200; animation: sparkleMove 1.8s forwards; }
        @keyframes sparkleMove {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(2.5); opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="bg-layer"></div>
    <div id="moya-layer"></div>
    <div id="heart-layer"></div>

    <script>
        const heartLayer = document.getElementById('heart-layer');
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        const sparkleCount = isMobile ? 50 : 400;

        // ğŸ’©ã¨ã‚­ãƒ©ã‚­ãƒ©ç”Ÿæˆé–¢æ•°
        function createSuperSparkles(x, y) {
            const dist = isMobile ? 400 : 1200;
            for (let i = 0; i < sparkleCount; i++) {
                const s = document.createElement('div');
                s.className = 'sparkle'; s.innerText = 'âœ¨';
                s.style.left = x + 'px'; s.style.top = y + 'px';
                s.style.setProperty('--tx', (Math.random() - 0.5) * dist + 'px');
                s.style.setProperty('--ty', (Math.random() - 0.5) * dist + 'px');
                document.body.appendChild(s);
                setTimeout(() => s.remove(), 1800);
            }
        }

        // æœ€ã‚‚ç¢ºå®Ÿã«åå¿œã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é–¢æ•°
        function handleAction(e) {
            // ã‚¤ãƒ™ãƒ³ãƒˆåº§æ¨™ã®å–å¾—ã‚’æ¥µé™ã¾ã§ã‚·ãƒ³ãƒ—ãƒ«ã«
            let x, y;
            if (e.touches && e.touches[0]) {
                x = e.touches[0].clientX;
                y = e.touches[0].clientY;
            } else {
                x = e.clientX;
                y = e.clientY;
            }
            
            const p = document.createElement('div');
            if (Math.random() < 0.1) {
                p.className = 'pop-common pop-giant';
                p.innerText = 'ğŸ’©';
                createSuperSparkles(x, y);
            } else {
                p.className = 'pop-common pop';
                p.innerText = ['ğŸˆ', 'â™¨ï¸', 'ğŸ’®'][Math.floor(Math.random() * 3)];
            }
            p.style.left = x + 'px'; p.style.top = y + 'px';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 1000);
        }

        // ãƒãƒ¼ãƒˆç”Ÿæˆã¨ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
        const icons = ['ğŸ’š','ğŸ’›','ğŸ©·','â¤ï¸','ğŸ§¡','ğŸ’™','ğŸ©µ','ğŸ’œ','ğŸ–¤','ğŸ©¶','ğŸ¤','â™¥ï¸','ğŸ¤'];
        for (let i = 0; i < (isMobile ? 30 : 111); i++) {
            const wrapper = document.createElement('div');
            wrapper.className = 'heart-wrapper';
            wrapper.style.left = (Math.random() * 80) + '%';
            wrapper.style.top = (Math.random() * 85) + '%';
            
            const h = document.createElement('div');
            h.className = 'heart';
            h.innerText = icons[i % icons.length];
            
            const aura = document.createElement('div');
            aura.className = 'aura';

            wrapper.appendChild(aura);
            wrapper.appendChild(h);

            // ã€è¶…é‡è¦ã€‘ pointerdown ã‚’ä½¿ã„ã€ä½™è¨ˆãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ’é™¤ã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ä»»ã›ã«ã™ã‚‹
            wrapper.addEventListener('pointerdown', handleAction);
            
            heartLayer.appendChild(wrapper);
        }

        // èƒŒæ™¯ç­‰ã¯çœç•¥ã›ãšæœ€å°é™ã®è² è·ã§å›ã™
        const bg = document.getElementById('bg-layer');
        for(let i=0; i<(isMobile?10:50); i++){
            const d = document.createElement('div');
            d.style.flex = "1";
            d.style.backgroundColor = "#fffafb";
            bg.appendChild(d);
        }
    </script>
</body>
</html>