<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>çœŸãƒ»ç©¶æ¥µè–åŸŸãƒ»æ¿€ãƒ¬ã‚¢é»„é‡‘ğŸ’©ç¥ç¥­ã€å®Œå…¨ä¸å…·åˆè§£æ¶ˆç‰ˆã€‘</title>
    <style>
        :root {
            --pop-size: 10rem;
            --giant-size: 50rem;
            --heart-size: 100px;
            --sparkle-dist: 1200px;
        }

        @media (max-width: 768px) {
            :root {
                --pop-size: 6rem;
                --giant-size: 18rem;
                --heart-size: 90px;
                --sparkle-dist: 450px;
            }
        }

        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: #fffafb;
            touch-action: manipulation; 
            font-family: sans-serif;
            -webkit-user-select: none;
            user-select: none;
        }
        
        #bg-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; z-index: 1; opacity: 0.5; pointer-events: none; }
        .panel { flex: 1; height: 100%; transition: background-color 1.5s ease; }

        /* ãƒãƒ¼ãƒˆé…ç½®ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆã“ã“ãŒå¸¸ã«ä¸€ç•ªä¸Šã«ãã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼‰ */
        #heart-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999; }
        
        .heart-wrapper {
            position: absolute; width: var(--heart-size); height: var(--heart-size);
            display: flex; justify-content: center; align-items: center;
            animation: fuyofuyo 11s infinite alternate ease-in-out;
            cursor: pointer;
            background: rgba(0,0,0,0); /* é€æ˜ãªèƒŒæ™¯ã§åˆ¤å®šã‚’ç›¤çŸ³ã« */
        }

        .aura {
            position: absolute; width: 85%; height: 85%; border-radius: 50%;
            background: conic-gradient(from 0deg, #ffb7b7, #fffbb7, #b7ffb7, #b7ffff, #b7d8ff, #e2b7ff, #ffb7b7);
            filter: blur(15px); opacity: 0.7; animation: auraSpin 3s infinite linear; z-index: -1;
            pointer-events: none;
        }
        @keyframes auraSpin { 0%{transform:rotate(0deg) scale(1);} 50%{transform:rotate(180deg) scale(1.2);} 100%{transform:rotate(360deg) scale(1);} }

        .heart { font-size: calc(var(--heart-size) * 0.5); pointer-events: none; }
        @keyframes fuyofuyo { 0% { transform: translate(0, 0) rotate(-10deg); } 100% { transform: translate(30px, -50px) rotate(10deg); } }

        /* å‡ºç¾ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆz-indexã‚’ãƒãƒ¼ãƒˆã‚ˆã‚Šä½ãè¨­å®šï¼‰ */
        .pop-common { 
            position: absolute; pointer-events: none; z-index: 100; transform: translate(-50%, -50%); 
            /* ä¸‡ãŒä¸€é‡ãªã£ã¦ã‚‚è§¦ã‚Œã‚‹ã‚ˆã†ã« */
            pointer-events: none !important; 
        }
        .pop { font-size: var(--pop-size); animation: bowafua 0.7s forwards; }
        .pop-giant { font-size: var(--giant-size); animation: giantBowafua 1.2s forwards; }

        @keyframes bowafua { 0%{transform:translate(-50%,-50%) scale(0); opacity:0;} 45%{transform:translate(-50%,-50%) scale(1.5); opacity:1;} 100%{transform:translate(-50%,-50%) scale(1.2); opacity:0;} }
        @keyframes giantBowafua { 0%{transform:translate(-50%,-50%) scale(0); opacity:0;} 50%{transform:translate(-50%,-50%) scale(1.4); opacity:1; filter: drop-shadow(0 0 50px gold);} 100%{transform:translate(-50%,-50%) scale(1.1); opacity:0;} }

        .sparkle { position: absolute; font-size: 2.5rem; pointer-events: none; z-index: 200; animation: sparkleMove 1.8s forwards; }
        @keyframes sparkleMove {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(2.5); opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="bg-layer"></div>
    <div id="heart-layer"></div>

    <script>
        const heartLayer = document.getElementById('heart-layer');
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        const sparkleCount = isMobile ? 50 : 400;

        function createSuperSparkles(x, y) {
            const dist = isMobile ? 400 : 1200;
            const container = document.body;
            for (let i = 0; i < sparkleCount; i++) {
                const s = document.createElement('div');
                s.className = 'sparkle'; s.innerText = 'âœ¨';
                s.style.left = x + 'px'; s.style.top = y + 'px';
                s.style.setProperty('--tx', (Math.random() - 0.5) * dist + 'px');
                s.style.setProperty('--ty', (Math.random() - 0.5) * dist + 'px');
                container.appendChild(s);
                // çµ‚ã‚ã£ãŸã‚‰ç¢ºå®Ÿã«DOMã‹ã‚‰å‰Šé™¤
                s.addEventListener('animationend', () => s.remove());
                // ä¿é™º
                setTimeout(() => { if(s.parentNode) s.remove(); }, 2000);
            }
        }

        function handleAction(e) {
            // ã‚¤ãƒ™ãƒ³ãƒˆã®ä¼æ’­ã‚’å®Œå…¨ã«æ­¢ã‚ã‚‹
            e.preventDefault();
            
            let x, y;
            if (e.touches && e.touches[0]) {
                x = e.touches[0].clientX;
                y = e.touches[0].clientY;
            } else {
                x = e.clientX;
                y = e.clientY;
            }
            
            const p = document.createElement('div');
            if (Math.random() < 0.1) {
                p.className = 'pop-common pop-giant';
                p.innerText = 'ğŸ’©';
                createSuperSparkles(x, y);
            } else {
                p.className = 'pop-common pop';
                p.innerText = ['ğŸˆ', 'â™¨ï¸', 'ğŸ’®'][Math.floor(Math.random() * 3)];
            }
            p.style.left = x + 'px'; p.style.top = y + 'px';
            document.body.appendChild(p);
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒçµ‚ã‚ã£ãŸã‚‰ç¢ºå®Ÿã«å‰Šé™¤
            p.addEventListener('animationend', () => p.remove());
            // ä¿é™º
            setTimeout(() => { if(p.parentNode) p.remove(); }, 1500);
        }

        // ãƒãƒ¼ãƒˆç”Ÿæˆ
        const icons = ['ğŸ’š','ğŸ’›','ğŸ©·','â¤ï¸','ğŸ§¡','ğŸ’™','ğŸ©µ','ğŸ’œ','ğŸ–¤','ğŸ©¶','ğŸ¤','â™¥ï¸','ğŸ¤'];
        for (let i = 0; i < (isMobile ? 30 : 111); i++) {
            const wrapper = document.createElement('div');
            wrapper.className = 'heart-wrapper';
            wrapper.style.left = (Math.random() * 80) + '%';
            wrapper.style.top = (Math.random() * 85) + '%';
            wrapper.style.animationDelay = (Math.random() * 5) + 's';
            
            const h = document.createElement('div');
            h.className = 'heart';
            h.innerText = icons[i % icons.length];
            
            const aura = document.createElement('div');
            aura.className = 'aura';

            wrapper.appendChild(aura);
            wrapper.appendChild(h);

            // pointerdownã§ç¢ºå®Ÿã«å–å¾—
            wrapper.addEventListener('pointerdown', handleAction, {passive: false});
            heartLayer.appendChild(wrapper);
        }
    </script>
</body>
</html>