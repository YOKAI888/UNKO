<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç©¶æ¥µè–åŸŸãƒ»æ¿€ãƒ¬ã‚¢é»„é‡‘ğŸ’©ç¥ç¥­ã€ã‚ºãƒ¼ãƒ å°å°ç‰ˆã€‘</title>
    <style>
        :root {
            --pop-size: 10rem;
            --giant-size: 50rem;
            --heart-size: 100px;
            --sparkle-dist: 1200px;
        }

        @media (max-width: 768px) {
            :root {
                --pop-size: 6rem;
                --giant-size: 18rem;
                --heart-size: 85px;
                --sparkle-dist: 450px;
            }
        }

        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: #fffafb;
            /* â˜…é‡è¦ï¼šãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã‚ºãƒ¼ãƒ ã‚’å«ã‚€ã‚ã‚‰ã‚†ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’ç„¡åŠ¹åŒ– */
            touch-action: none; 
            font-family: sans-serif;
            -webkit-user-select: none;
            /* iOSå‘ã‘ã®ã‚ºãƒ¼ãƒ é˜²æ­¢ç­– */
            -webkit-text-size-adjust: none;
        }
        
        #bg-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; z-index: 1; opacity: 0.5; pointer-events: none; }
        .panel { flex: 1; height: 100%; transition: background-color 1.5s ease; }

        #moya-layer {
            position: fixed; top: -50%; left: -50%; width: 200%; height: 200%; z-index: 5;
            background: radial-gradient(circle, rgba(255,182,193,0.3) 0%, rgba(182,208,255,0.3) 30%, rgba(182,255,208,0.3) 60%, rgba(255,255,255,0) 100%);
            filter: blur(80px); animation: moyaRotate 44s infinite linear; pointer-events: none;
        }
        @keyframes moyaRotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        #heart-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; }
        
        .heart-wrapper {
            position: absolute; width: var(--heart-size); height: var(--heart-size);
            display: flex; justify-content: center; align-items: center;
            animation: fuyofuyo 11s infinite alternate ease-in-out;
            cursor: pointer;
            background: rgba(255,255,255,0.01); 
            /* â˜…ã“ã“ã«ã‚‚ touch-action ã‚’æŒ‡å®šã—ã¦å€‹åˆ¥ã«ã‚¬ãƒ¼ãƒ‰ */
            touch-action: manipulation; 
        }

        .aura {
            position: absolute; width: 85%; height: 85%; border-radius: 50%;
            background: conic-gradient(from 0deg, #ffb7b7, #fffbb7, #b7ffb7, #b7ffff, #b7d8ff, #e2b7ff, #ffb7b7);
            filter: blur(15px); opacity: 0.7; animation: auraSpin 3s infinite linear; z-index: -1;
            pointer-events: none;
        }
        @keyframes auraSpin { 0%{transform:rotate(0deg) scale(1);} 50%{transform:rotate(180deg) scale(1.2);} 100%{transform:rotate(360deg) scale(1);} }

        .heart { font-size: calc(var(--heart-size) * 0.5); user-select: none; filter: drop-shadow(0 0 5px white); pointer-events: none; }
        @keyframes fuyofuyo { 0% { transform: translate(0, 0) rotate(-10deg); } 100% { transform: translate(30px, -50px) rotate(10deg); } }

        .pop-common { position: absolute; pointer-events: none; z-index: 100; transform: translate(-50%, -50%); }
        .pop { font-size: var(--pop-size); animation: bowafua 0.7s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards; }
        .pop-giant { font-size: var(--giant-size); animation: giantBowafua 1.2s cubic-bezier(0.18, 0.89, 0.32, 1.5) forwards; }

        @keyframes bowafua { 0%{transform:translate(-50%,-50%) scale(0); opacity:0;} 45%{transform:translate(-50%,-50%) scale(1.5); opacity:1;} 100%{transform:translate(-50%,-50%) scale(1.2); opacity:0;} }
        @keyframes giantBowafua { 
            0% { transform: translate(-50%, -50%) scale(0) rotate(-45deg); opacity: 0; } 
            50% { transform: translate(-50%, -50%) scale(1.4) rotate(20deg); opacity: 1; filter: drop-shadow(0 0 80px gold); } 
            100% { transform: translate(-50%, -50%) scale(1.1) rotate(0deg); opacity: 0; } 
        }

        .sparkle { position: absolute; font-size: 2.5rem; pointer-events: none; z-index: 200; animation: sparkleMove 1.8s ease-out forwards; }
        @keyframes sparkleMove {
            0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(2.5) rotate(720deg); opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="bg-layer"></div>
    <div id="moya-layer"></div>
    <div id="heart-layer"></div>

    <script>
        const bgLayer = document.getElementById('bg-layer');
        const heartLayer = document.getElementById('heart-layer');
        const colors = ['#FFC0CB', '#FFD1DC', '#FFE4E1', '#E6E6FA', '#F0F8FF', '#F5FFFA', '#FFFACD', '#FFEBCD', '#F0FFF0', '#F0FFFF', '#F5F5F5', '#FFF0F5'];
        
        const isMobile = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
        const heartCount = isMobile ? 30 : 111;
        const sparkleCount = isMobile ? 50 : 400;

        for (let i = 0; i < (isMobile ? 25 : 80); i++) {
            const p = document.createElement('div');
            p.className = 'panel'; p.style.backgroundColor = colors[i % colors.length];
            bgLayer.appendChild(p);
        }
        
        function createSuperSparkles(x, y) {
            const dist = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--sparkle-dist'));
            for (let i = 0; i < sparkleCount; i++) {
                const s = document.createElement('div');
                s.className = 'sparkle'; s.innerText = 'âœ¨';
                s.style.left = x + 'px'; s.style.top = y + 'px';
                s.style.setProperty('--tx', (Math.random() - 0.5) * dist + 'px');
                s.style.setProperty('--ty', (Math.random() - 0.5) * dist + 'px');
                document.body.appendChild(s);
                setTimeout(() => s.remove(), 1800);
            }
        }

        function handleAction(e) {
            // â˜…ã“ã“ã§ã® e.preventDefault() ãŒãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã‚ºãƒ¼ãƒ ã‚’é˜²ãæœ€å¤§ã®éµã§ã™
            if (e.cancelable) e.preventDefault();

            let x, y;
            if (e.type === 'touchstart') {
                x = e.touches[0].clientX;
                y = e.touches[0].clientY;
            } else {
                x = e.clientX;
                y = e.clientY;
            }
            
            const p = document.createElement('div');
            if (Math.random() < 0.1) {
                p.className = 'pop-common pop-giant';
                p.innerText = 'ğŸ’©';
                createSuperSparkles(x, y);
            } else {
                p.className = 'pop-common pop';
                p.innerText = ['ğŸˆ', 'â™¨ï¸', 'ğŸ’®'][Math.floor(Math.random() * 3)];
            }
            p.style.left = x + 'px'; p.style.top = y + 'px';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 1000);
        }

        for (let i = 0; i < heartCount; i++) {
            const wrapper = document.createElement('div');
            wrapper.className = 'heart-wrapper';
            wrapper.style.left = (Math.random() * 80) + '%';
            wrapper.style.top = (Math.random() * 85) + '%';
            wrapper.style.animationDelay = (Math.random() * 5) + 's';

            const aura = document.createElement('div'); aura.className = 'aura';
            const h = document.createElement('div'); h.className = 'heart';
            h.innerText = ['ğŸ’š','ğŸ’›','ğŸ©·','â¤ï¸','ğŸ§¡','ğŸ’™','ğŸ©µ','ğŸ’œ','ğŸ–¤','ğŸ©¶','ğŸ¤','â™¥ï¸','ğŸ¤'][Math.floor(Math.random() * 13)];
            
            wrapper.appendChild(aura); wrapper.appendChild(h);
            
            if ('ontouchstart' in window) {
                // {passive: false} ã«ã™ã‚‹ã“ã¨ã§ã€preventDefault() ã‚’æœ‰åŠ¹ã«ã—ã¦ã‚ºãƒ¼ãƒ ã‚’é˜»æ­¢
                wrapper.addEventListener('touchstart', handleAction, {passive: false});
            } else {
                wrapper.addEventListener('mousedown', handleAction);
            }
            heartLayer.appendChild(wrapper);
        }

        // â˜…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…¨ä½“ã§ã®ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã‚ºãƒ¼ãƒ ã‚’å¿µã®ãŸã‚æœ€çµ‚é˜²è¡›ç·šã§é˜»æ­¢
        document.addEventListener('touchstart', (e) => {
            if (e.touches.length > 1) e.preventDefault();
        }, {passive: false});
    </script>
</body>
</html>